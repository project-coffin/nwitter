(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{66:function(e,t,a){e.exports=a(86)},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),l=a.n(i),u=a(8),c=a(34),o=a(15),d=function(e){var t=e.viewer;return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/profile"},null===t||void 0===t?void 0:t.displayName," Profile"))))},s=a(35),m=a(117),v=a(118),p=a(39);a(82),a(83),a(84);p.initializeApp({apiKey:"AIzaSyB0qaw55SK31O3cZWwbkpZ7CLpmWYs4kYU",authDomain:"nwitter-31ec8.firebaseapp.com",databaseURL:"https://nwitter-31ec8.firebaseio.com",projectId:"nwitter-31ec8",storageBucket:"nwitter-31ec8.appspot.com",messagingSenderId:"1017617908043",appId:"1:1017617908043:web:6dedb423b43756994a68ce"});var f=p,h=p.auth(),b=p.firestore(),w=p.storage(),E=a(7),g=a.n(E),x=a(14),k=a(119),O=a(120),j=a(27),S=function(e){var t=e.nweet,a=e.isAuthor,n=Object(j.a)(),i=n.register,l=n.handleSubmit,c=r.a.useState(!1),o=Object(u.a)(c,2),d=o[0],s=o[1],m=function(){var e=Object(x.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.doc("nweets/".concat(null===t||void 0===t?void 0:t.id)).delete();case 2:if(!(null===t||void 0===t?void 0:t.photo)){e.next=5;break}return e.next=5,w.refFromURL(null===t||void 0===t?void 0:t.photo).delete();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(x.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s((function(e){return!e})),!d){e.next=4;break}return e.next=4,b.doc("nweets/".concat(null===t||void 0===t?void 0:t.id)).update({text:null===a||void 0===a?void 0:a.newNweet});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",null,d?r.a.createElement(k.a,{name:"newNweet",inputRef:i,defaultValue:null===t||void 0===t?void 0:t.text}):null===t||void 0===t?void 0:t.text,(null===t||void 0===t?void 0:t.photo)&&r.a.createElement("img",{src:null===t||void 0===t?void 0:t.photo,width:50,height:50,alt:"nweet"}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onClick:m},"Delete"),r.a.createElement(O.a,{onClick:l(v)},"Update"))))},y=a(121),R=Object(m.a)({field:{marginRight:15}}),I=function(e){var t=e.viewerId,a=R(),n=r.a.useState(),i=Object(u.a)(n,2),l=i[0],c=i[1],o=Object(j.a)(),d=o.register,m=o.handleSubmit,v=o.watch,p=o.setValue,f=function(){var e=Object(x.a)(g.a.mark((function e(a){var n,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=8;break}return r=w.ref().child("".concat(t,"/").concat(Object(y.a)())),e.next=4,r.putString(l,"data_url");case 4:return i=e.sent,e.next=7,i.ref.getDownloadURL();case 7:n=e.sent;case 8:return e.next=10,b.collection("nweets").add(Object(s.a)({text:null===a||void 0===a?void 0:a.nweet,createdAt:new Date,authorId:t},n&&{photo:n}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=v("image"),E=new FileReader;E.onloadend=function(e){c(e.currentTarget.result)},(null===h||void 0===h?void 0:h[0])&&E.readAsDataURL(null===h||void 0===h?void 0:h[0]);return r.a.createElement("form",{onSubmit:m(f)},r.a.createElement(k.a,{label:"nweet",name:"nweet",inputRef:d,variant:"outlined",className:a.field}),r.a.createElement(k.a,{name:"image",type:"file",inputRef:d,variant:"outlined",className:a.field}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:l,width:"50px",height:"50px",alt:"nweet"}),r.a.createElement(O.a,{onClick:function(){p("image",null),c(null)}},"Clear Photo")),r.a.createElement(O.a,{onClick:m(f),variant:"outlined"},"submit"))},N=Object(m.a)({divider:{margin:"30px 0"}}),C=function(e){var t=e.viewer,a=N(),n=r.a.useState([]),i=Object(u.a)(n,2),l=i[0],c=i[1];return r.a.useEffect((function(){b.collection("nweets").onSnapshot((function(e){var t,a=null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((function(e){return Object(s.a)({id:null===e||void 0===e?void 0:e.id},e.data())}));c(a)}))}),[]),r.a.createElement("div",null,r.a.createElement("h3",null,"Home"),r.a.createElement(I,{viewerId:null===t||void 0===t?void 0:t.uid}),r.a.createElement(v.a,{className:a.divider}),r.a.createElement("div",null,null===l||void 0===l?void 0:l.map((function(e){return r.a.createElement(S,{nweet:e,key:null===e||void 0===e?void 0:e.id,isAuthor:(null===t||void 0===t?void 0:t.uid)===(null===e||void 0===e?void 0:e.authorId)})}))))},A=function(e){var t=e.viewer,a=r.a.useState([]),i=Object(u.a)(a,2),l=i[0],c=i[1],d=r.a.useState(null),m=Object(u.a)(d,2),p=m[0],f=m[1],E=Object(o.f)(),S=Object(j.a)(),R=S.register,I=S.handleSubmit,N=S.watch,C=function(){var e=Object(x.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signOut();case 2:E.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("nweets").where("authorId","==",null===t||void 0===t?void 0:t.uid).orderBy("createdAt").get();case 2:a=e.sent,c(a.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){A()}),[]);var L=function(){var e=Object(x.a)(g.a.mark((function e(a){var n,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===a||void 0===a?void 0:a.username)&&(null===a||void 0===a?void 0:a.username)!==(null===t||void 0===t?void 0:t.displayName)){e.next=2;break}return e.abrupt("return");case 2:if(!p){e.next=10;break}return r=w.ref().child("".concat(null===t||void 0===t?void 0:t.uid,"/").concat(Object(y.a)())),e.next=6,r.putString(p,"data_url");case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:n=e.sent;case 10:return e.next=12,t.updateProfile(Object(s.a)({displayName:null===a||void 0===a?void 0:a.username},n&&{photoURL:n}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=N("photo"),D=new FileReader;return D.onloadend=function(e){f(e.currentTarget.result)},(null===U||void 0===U?void 0:U[0])&&D.readAsDataURL(null===U||void 0===U?void 0:U[0]),r.a.createElement("div",null,r.a.createElement("h3",null,"edit profile"),r.a.createElement("form",{onSubmit:I(L)},r.a.createElement(k.a,{defaultValue:null===t||void 0===t?void 0:t.displayName,name:"username",label:"name",variant:"outlined",inputRef:R({required:!0})}),r.a.createElement(k.a,{type:"file",name:"photo",variant:"outlined",inputRef:R}),r.a.createElement(O.a,{variant:"outlined",onClick:I(L)},"submit")),r.a.createElement("img",{src:p||(null===t||void 0===t?void 0:t.photoURL),width:50,height:50,alt:null===t||void 0===t?void 0:t.displayName}),r.a.createElement(v.a,null),r.a.createElement(O.a,{variant:"outlined",onClick:C},"Log out"),r.a.createElement(v.a,null),r.a.createElement("h3",null,"your nweets"),null===l||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.text})))},L=Object(m.a)({field:{marginRight:15},fieldWrapper:{marginBottom:15},toggleButton:{cursor:"pointer",textDecoration:"underline",color:"#999"}}),U=function(){var e=Object(j.a)(),t=e.register,a=e.handleSubmit,n=r.a.useState(null),i=Object(u.a)(n,2),l=i[0],c=i[1],o=r.a.useState(!0),d=Object(u.a)(o,2),s=d[0],m=d[1],v=function(){var e=Object(x.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(a=t||{}).email,r=a.password,n&&r){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,!s){e.next=9;break}return e.next=7,h.createUserWithEmailAndPassword(n,r);case 7:e.next=11;break;case 9:return e.next=11,h.signInWithEmailAndPassword(n,r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),c(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),p=L();return r.a.createElement("div",null,r.a.createElement("h3",null,s?"Sign up":"Sign in"),r.a.createElement("form",null,r.a.createElement("div",{className:p.fieldWrapper},r.a.createElement(k.a,{className:p.field,label:"email",name:"email",inputRef:t({required:!0}),variant:"outlined",error:!!l,helperText:l,required:!0}),r.a.createElement(k.a,{label:"password",name:"password",type:"password",inputRef:t({required:!0}),variant:"outlined",required:!0})),r.a.createElement(O.a,{onClick:a(v),variant:"outlined"},s?"Sign up":"Sign in")),r.a.createElement("p",{className:p.toggleButton,onClick:function(){return m((function(e){return!e}))}},"Click this for ",s?"sign in":"sign up"))},D=function(){var e=function(){var e=Object(x.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.currentTarget.name,e.next="google"===e.t0?3:"github"===e.t0?5:7;break;case 3:return a=new f.auth.GoogleAuthProvider,e.abrupt("break",8);case 5:return a=new f.auth.GithubAuthProvider,e.abrupt("break",8);case 7:return e.abrupt("return");case 8:return h.useDeviceLanguage(),e.next=11,h.signInWithPopup(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h3",null,"Social Sign in"),r.a.createElement(O.a,{variant:"outlined",onClick:e,style:{marginRight:15},name:"google"},"Google"),r.a.createElement(O.a,{variant:"outlined",onClick:e,name:"github"},"Github"))},P=Object(m.a)({root:{padding:30},divider:{margin:"30px 0"}}),B=function(){var e=P();return r.a.createElement("div",{className:e.root},r.a.createElement(U,null),r.a.createElement(v.a,{className:e.divider}),r.a.createElement(D,null))},W=function(e){var t=e.isLoggedIn,a=e.viewer;return r.a.createElement(c.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/"},t?r.a.createElement(d,{viewer:a}):r.a.createElement(B,null)),r.a.createElement(o.a,{exact:!0,path:"/home"},r.a.createElement(C,{viewer:a})),r.a.createElement(o.a,{exact:!0,path:"/profile"},r.a.createElement(A,{viewer:a}))))};var q=function(){var e=r.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],i=r.a.useState(!1),l=Object(u.a)(i,2),c=l[0],o=l[1],d=r.a.useState(null),s=Object(u.a)(d,2),m=s[0],v=s[1];return r.a.useEffect((function(){h.onAuthStateChanged((function(e){e&&v(e),o(!!e),n(!0)}))}),[]),r.a.createElement("div",null,a?r.a.createElement(W,{isLoggedIn:c,viewer:m}):r.a.createElement("h3",null,"Initializing..."))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.6a73f267.chunk.js.map