{"version":3,"sources":["components/Navigation.js","fb.js","components/Nweet.js","components/NweetFactory.js","routes/Home.js","routes/Profile.js","routes/Auth/EmailSignIn.js","routes/Auth/SocialSignIn.js","routes/Auth/index.js","components/Router.js","components/App.js","index.js"],"names":["Navigation","viewer","to","displayName","firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","fbInstance","authService","dbService","storageService","Nweet","nweet","isAuthor","useForm","register","handleSubmit","React","useState","isEditing","setIsEditing","handleDelete","a","doc","id","delete","photo","refFromURL","handleUpdate","data","prev","update","text","newNweet","TextField","name","inputRef","defaultValue","src","width","height","alt","Button","onClick","useStyles","makeStyles","field","marginRight","NweetFactory","viewerId","classes","imageUrl","setImageUrl","watch","setValue","onSubmit","fileRef","ref","child","uuidv4","putString","res","getDownloadURL","downloadUrl","collection","add","createdAt","Date","authorId","image","reader","FileReader","onloadend","finishedEvent","currentTarget","result","readAsDataURL","label","variant","className","type","divider","margin","Home","nweets","setNweets","useEffect","onSnapshot","snapshot","nweetList","docs","map","uid","Divider","key","Profile","myNweets","setMyNweets","history","useHistory","handleLogout","signOut","push","getMyNweets","where","orderBy","get","username","updateProfile","photoURL","required","fieldWrapper","marginBottom","toggleButton","cursor","textDecoration","color","EmailSignIn","errorMessage","setErrorMessage","isNewAccount","setIsNewAccount","email","password","createUserWithEmailAndPassword","signInWithEmailAndPassword","message","error","helperText","SocialSignIn","handleClick","e","provider","auth","GoogleAuthProvider","GithubAuthProvider","useDeviceLanguage","signInWithPopup","style","root","padding","Auth","MyRouter","isLoggedIn","exact","path","App","init","setInit","setIsLoggedIn","setViewer","onAuthStateChanged","user","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6a73f267.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Navigation = ({ viewer }) => {\n  return (\n    <div>\n      <ul>\n        <li>\n          <Link to=\"/home\">Home</Link>\n        </li>\n        <li>\n          <Link to=\"/profile\">{viewer?.displayName} Profile</Link>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Navigation;\n","import * as firebase from \"firebase\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const fbInstance = firebase;\nexport const authService = firebase.auth();\nexport const dbService = firebase.firestore();\nexport const storageService = firebase.storage();\n","import React from \"react\";\nimport { Button, TextField } from \"@material-ui/core\";\nimport { dbService, storageService } from \"fb\";\nimport { useForm } from \"react-hook-form\";\n\nconst Nweet = ({ nweet, isAuthor }) => {\n  const { register, handleSubmit } = useForm();\n  const [isEditing, setIsEditing] = React.useState(false);\n  const handleDelete = async () => {\n    await dbService.doc(`nweets/${nweet?.id}`).delete();\n    if (nweet?.photo) {\n      await storageService.refFromURL(nweet?.photo).delete();\n    }\n  };\n  const handleUpdate = async (data) => {\n    setIsEditing((prev) => !prev);\n    if (isEditing) {\n      await dbService\n        .doc(`nweets/${nweet?.id}`)\n        .update({ text: data?.newNweet });\n    }\n  };\n\n  return (\n    <div>\n      <form>\n        {isEditing ? (\n          <TextField\n            name=\"newNweet\"\n            inputRef={register}\n            defaultValue={nweet?.text}\n          />\n        ) : (\n          nweet?.text\n        )}\n        {nweet?.photo && (\n          <img src={nweet?.photo} width={50} height={50} alt=\"nweet\" />\n        )}\n        {isAuthor && (\n          <>\n            <Button onClick={handleDelete}>Delete</Button>\n            <Button onClick={handleSubmit(handleUpdate)}>Update</Button>\n          </>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default Nweet;\n","import React from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useForm } from \"react-hook-form\";\nimport { Button, TextField, makeStyles } from \"@material-ui/core\";\nimport { dbService, storageService } from \"fb\";\n\nconst useStyles = makeStyles({\n  field: {\n    marginRight: 15,\n  },\n});\n\nconst NweetFactory = ({ viewerId }) => {\n  const classes = useStyles();\n  const [imageUrl, setImageUrl] = React.useState();\n\n  const { register, handleSubmit, watch, setValue } = useForm();\n\n  const onSubmit = async (data) => {\n    let downloadUrl;\n    if (imageUrl) {\n      const fileRef = storageService.ref().child(`${viewerId}/${uuidv4()}`);\n      const res = await fileRef.putString(imageUrl, \"data_url\");\n      downloadUrl = await res.ref.getDownloadURL();\n    }\n\n    await dbService.collection(\"nweets\").add({\n      text: data?.nweet,\n      createdAt: new Date(),\n      authorId: viewerId,\n      ...(downloadUrl && { photo: downloadUrl }),\n    });\n  };\n\n  // handle image\n  const image = watch(\"image\");\n  const reader = new FileReader();\n  reader.onloadend = (finishedEvent) => {\n    setImageUrl(finishedEvent.currentTarget.result);\n  };\n  if (image?.[0]) {\n    reader.readAsDataURL(image?.[0]);\n  }\n\n  const handleImageClear = () => {\n    setValue(\"image\", null);\n    setImageUrl(null);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <TextField\n        label=\"nweet\"\n        name=\"nweet\"\n        inputRef={register}\n        variant=\"outlined\"\n        className={classes.field}\n      />\n      <TextField\n        name=\"image\"\n        type=\"file\"\n        inputRef={register}\n        variant=\"outlined\"\n        className={classes.field}\n      />\n      {imageUrl && (\n        <>\n          <img src={imageUrl} width=\"50px\" height=\"50px\" alt=\"nweet\" />\n          <Button onClick={handleImageClear}>Clear Photo</Button>\n        </>\n      )}\n      <Button onClick={handleSubmit(onSubmit)} variant=\"outlined\">\n        submit\n      </Button>\n    </form>\n  );\n};\n\nexport default NweetFactory;\n","import React from \"react\";\nimport { Divider, makeStyles } from \"@material-ui/core\";\nimport { dbService } from \"fb\";\nimport Nweet from \"components/Nweet\";\nimport NweetFactory from \"components/NweetFactory\";\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: \"30px 0\",\n  },\n});\n\nconst Home = ({ viewer }) => {\n  const classes = useStyles();\n  const [nweets, setNweets] = React.useState([]);\n\n  React.useEffect(() => {\n    dbService.collection(\"nweets\").onSnapshot((snapshot) => {\n      const nweetList = snapshot?.docs?.map((doc) => ({\n        id: doc?.id,\n        ...doc.data(),\n      }));\n      setNweets(nweetList);\n    });\n  }, []);\n\n  return (\n    <div>\n      <h3>Home</h3>\n\n      <NweetFactory viewerId={viewer?.uid} />\n\n      <Divider className={classes.divider} />\n\n      <div>\n        {nweets?.map((nweet) => (\n          <Nweet\n            nweet={nweet}\n            key={nweet?.id}\n            isAuthor={viewer?.uid === nweet?.authorId}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React, { useEffect } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Divider, TextField } from \"@material-ui/core\";\nimport { authService, dbService, storageService } from \"fb\";\n\nconst Profile = ({ viewer }) => {\n  const [myNweets, setMyNweets] = React.useState([]);\n  const [imageUrl, setImageUrl] = React.useState(null);\n  const history = useHistory();\n  const { register, handleSubmit, watch } = useForm();\n  const handleLogout = async () => {\n    await authService.signOut();\n    history.push(\"/\");\n  };\n\n  const getMyNweets = async () => {\n    const nweets = await dbService\n      .collection(\"nweets\")\n      .where(\"authorId\", \"==\", viewer?.uid)\n      .orderBy(\"createdAt\")\n      .get();\n\n    setMyNweets(nweets.docs.map((doc) => doc.data()));\n  };\n\n  useEffect(() => {\n    getMyNweets();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onSubmit = async (data) => {\n    if (!data?.username || data?.username === viewer?.displayName) return;\n\n    let downloadUrl;\n    if (imageUrl) {\n      const fileRef = storageService.ref().child(`${viewer?.uid}/${uuidv4()}`);\n      const res = await fileRef.putString(imageUrl, \"data_url\");\n      downloadUrl = await res.ref.getDownloadURL();\n    }\n\n    await viewer.updateProfile({\n      displayName: data?.username,\n      ...(downloadUrl && { photoURL: downloadUrl }),\n    });\n  };\n\n  const photo = watch(\"photo\");\n  const reader = new FileReader();\n  reader.onloadend = (finishedEvent) => {\n    setImageUrl(finishedEvent.currentTarget.result);\n  };\n  if (photo?.[0]) {\n    reader.readAsDataURL(photo?.[0]);\n  }\n\n  return (\n    <div>\n      <h3>edit profile</h3>\n\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <TextField\n          defaultValue={viewer?.displayName}\n          name=\"username\"\n          label=\"name\"\n          variant=\"outlined\"\n          inputRef={register({ required: true })}\n        />\n        <TextField\n          type=\"file\"\n          name=\"photo\"\n          variant=\"outlined\"\n          inputRef={register}\n        />\n        <Button variant=\"outlined\" onClick={handleSubmit(onSubmit)}>\n          submit\n        </Button>\n      </form>\n\n      <img\n        src={imageUrl || viewer?.photoURL}\n        width={50}\n        height={50}\n        alt={viewer?.displayName}\n      />\n\n      <Divider />\n\n      <Button variant=\"outlined\" onClick={handleLogout}>\n        Log out\n      </Button>\n\n      <Divider />\n\n      <h3>your nweets</h3>\n\n      {myNweets?.map((nweet) => nweet?.text)}\n    </div>\n  );\n};\n\nexport default Profile;\n","import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { Button, TextField, makeStyles } from \"@material-ui/core\";\nimport { authService } from \"fb\";\n\nconst useStyles = makeStyles({\n  field: {\n    marginRight: 15,\n  },\n  fieldWrapper: {\n    marginBottom: 15,\n  },\n  toggleButton: {\n    cursor: \"pointer\",\n    textDecoration: \"underline\",\n    color: \"#999\",\n  },\n});\n\nconst EmailSignIn = () => {\n  const { register, handleSubmit } = useForm();\n  const [errorMessage, setErrorMessage] = React.useState(null);\n  const [isNewAccount, setIsNewAccount] = React.useState(true);\n  const onSubmit = async (data) => {\n    const { email, password } = data || {};\n    if (!email || !password) return;\n\n    try {\n      if (isNewAccount) {\n        await authService.createUserWithEmailAndPassword(email, password);\n      } else {\n        await authService.signInWithEmailAndPassword(email, password);\n      }\n    } catch (error) {\n      setErrorMessage(error.message);\n    }\n  };\n\n  const classes = useStyles();\n\n  return (\n    <div>\n      <h3>{isNewAccount ? \"Sign up\" : \"Sign in\"}</h3>\n      <form>\n        <div className={classes.fieldWrapper}>\n          <TextField\n            className={classes.field}\n            label=\"email\"\n            name=\"email\"\n            inputRef={register({ required: true })}\n            variant=\"outlined\"\n            error={!!errorMessage}\n            helperText={errorMessage}\n            required\n          />\n          <TextField\n            label=\"password\"\n            name=\"password\"\n            type=\"password\"\n            inputRef={register({ required: true })}\n            variant=\"outlined\"\n            required\n          />\n        </div>\n        <Button onClick={handleSubmit(onSubmit)} variant=\"outlined\">\n          {isNewAccount ? \"Sign up\" : \"Sign in\"}\n        </Button>\n      </form>\n\n      <p\n        className={classes.toggleButton}\n        onClick={() => setIsNewAccount((prev) => !prev)}\n      >\n        Click this for {isNewAccount ? \"sign in\" : \"sign up\"}\n      </p>\n    </div>\n  );\n};\n\nexport default EmailSignIn;\n","import React from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { fbInstance, authService } from \"fb\";\n\nconst SocialSignIn = () => {\n  const handleClick = async (e) => {\n    let provider;\n    switch (e.currentTarget.name) {\n      case \"google\":\n        provider = new fbInstance.auth.GoogleAuthProvider();\n        break;\n      case \"github\":\n        provider = new fbInstance.auth.GithubAuthProvider();\n        break;\n      default:\n        return;\n    }\n\n    authService.useDeviceLanguage();\n    await authService.signInWithPopup(provider);\n  };\n  return (\n    <div>\n      <h3>Social Sign in</h3>\n\n      <Button\n        variant=\"outlined\"\n        onClick={handleClick}\n        style={{ marginRight: 15 }}\n        name=\"google\"\n      >\n        Google\n      </Button>\n      <Button variant=\"outlined\" onClick={handleClick} name=\"github\">\n        Github\n      </Button>\n    </div>\n  );\n};\n\nexport default SocialSignIn;\n","import React from \"react\";\nimport { Divider, makeStyles } from \"@material-ui/core\";\nimport EmailSignIn from \"./EmailSignIn\";\nimport SocialSignIn from \"./SocialSignIn\";\n\nconst useStyles = makeStyles({\n  root: {\n    padding: 30,\n  },\n  divider: {\n    margin: \"30px 0\",\n  },\n});\n\nconst Auth = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <EmailSignIn />\n      <Divider className={classes.divider} />\n      <SocialSignIn />\n    </div>\n  );\n};\n\nexport default Auth;\n","import React from \"react\";\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Navigation from \"./Navigation\";\nimport Home from \"routes/Home\";\nimport Profile from \"routes/Profile\";\nimport Auth from \"routes/Auth\";\n\nconst MyRouter = ({ isLoggedIn, viewer }) => {\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          {isLoggedIn ? <Navigation viewer={viewer} /> : <Auth />}\n        </Route>\n        <Route exact path=\"/home\">\n          <Home viewer={viewer} />\n        </Route>\n        <Route exact path=\"/profile\">\n          <Profile viewer={viewer} />\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default MyRouter;\n","import React from \"react\";\nimport MyRouter from \"./Router\";\nimport { authService } from \"fb\";\n\nfunction App() {\n  const [init, setInit] = React.useState(false);\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const [viewer, setViewer] = React.useState(null);\n\n  React.useEffect(() => {\n    authService.onAuthStateChanged((user) => {\n      if (user) {\n        setViewer(user);\n      }\n      setIsLoggedIn(!!user);\n      setInit(true);\n    });\n  }, []);\n\n  return (\n    <div>\n      {init ? (\n        <MyRouter isLoggedIn={isLoggedIn} viewer={viewer} />\n      ) : (\n        <h3>Initializing...</h3>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}